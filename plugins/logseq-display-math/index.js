(()=>{var Yo=Object.create;var Fr=Object.defineProperty;var Xo=Object.getOwnPropertyDescriptor;var Qo=Object.getOwnPropertyNames;var ei=Object.getPrototypeOf,ti=Object.prototype.hasOwnProperty;var ni=(me,ae)=>()=>(ae||me((ae={exports:{}}).exports,ae),ae.exports);var ri=(me,ae,te,Qe)=>{if(ae&&typeof ae=="object"||typeof ae=="function")for(let R of Qo(ae))!ti.call(me,R)&&R!==te&&Fr(me,R,{get:()=>ae[R],enumerable:!(Qe=Xo(ae,R))||Qe.enumerable});return me};var oi=(me,ae,te)=>(te=me!=null?Yo(ei(me)):{},ri(ae||!me||!me.__esModule?Fr(te,"default",{value:me,enumerable:!0}):te,me));var Nr=ni((Se,ke)=>{(function(me,ae){typeof Se=="object"&&typeof ke=="object"?ke.exports=ae():typeof define=="function"&&define.amd?define([],ae):typeof Se=="object"?Se.LSPluginEntry=ae():me.LSPluginEntry=ae()})(self,()=>(()=>{var me={227:(R,h,S)=>{var E=S(155);h.formatArgs=function(I){if(I[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+I[0]+(this.useColors?"%c ":" ")+"+"+R.exports.humanize(this.diff),!this.useColors)return;let V="color: "+this.color;I.splice(1,0,V,"color: inherit");let v=0,p=0;I[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(v++,y==="%c"&&(p=v))}),I.splice(p,0,V)},h.save=function(I){try{I?h.storage.setItem("debug",I):h.storage.removeItem("debug")}catch{}},h.load=function(){let I;try{I=h.storage.getItem("debug")}catch{}return!I&&E!==void 0&&"env"in E&&(I=E.env.DEBUG),I},h.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},h.storage=function(){try{return localStorage}catch{}}(),h.destroy=(()=>{let I=!1;return()=>{I||(I=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],h.log=console.debug||console.log||(()=>{}),R.exports=S(447)(h);let{formatters:O}=R.exports;O.j=function(I){try{return JSON.stringify(I)}catch(V){return"[UnexpectedJSONParseError]: "+V.message}}},447:(R,h,S)=>{R.exports=function(E){function O(v){let p,y,b,D=null;function T(...U){if(!T.enabled)return;let B=T,k=Number(new Date),L=k-(p||k);B.diff=L,B.prev=p,B.curr=k,p=k,U[0]=O.coerce(U[0]),typeof U[0]!="string"&&U.unshift("%O");let s=0;U[0]=U[0].replace(/%([a-zA-Z%])/g,(l,m)=>{if(l==="%%")return"%";s++;let C=O.formatters[m];if(typeof C=="function"){let W=U[s];l=C.call(B,W),U.splice(s,1),s--}return l}),O.formatArgs.call(B,U),(B.log||O.log).apply(B,U)}return T.namespace=v,T.useColors=O.useColors(),T.color=O.selectColor(v),T.extend=I,T.destroy=O.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>D!==null?D:(y!==O.namespaces&&(y=O.namespaces,b=O.enabled(v)),b),set:U=>{D=U}}),typeof O.init=="function"&&O.init(T),T}function I(v,p){let y=O(this.namespace+(p===void 0?":":p)+v);return y.log=this.log,y}function V(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}return O.debug=O,O.default=O,O.coerce=function(v){return v instanceof Error?v.stack||v.message:v},O.disable=function(){let v=[...O.names.map(V),...O.skips.map(V).map(p=>"-"+p)].join(",");return O.enable(""),v},O.enable=function(v){let p;O.save(v),O.namespaces=v,O.names=[],O.skips=[];let y=(typeof v=="string"?v:"").split(/[\s,]+/),b=y.length;for(p=0;p<b;p++)y[p]&&((v=y[p].replace(/\*/g,".*?"))[0]==="-"?O.skips.push(new RegExp("^"+v.slice(1)+"$")):O.names.push(new RegExp("^"+v+"$")))},O.enabled=function(v){if(v[v.length-1]==="*")return!0;let p,y;for(p=0,y=O.skips.length;p<y;p++)if(O.skips[p].test(v))return!1;for(p=0,y=O.names.length;p<y;p++)if(O.names[p].test(v))return!0;return!1},O.humanize=S(824),O.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(E).forEach(v=>{O[v]=E[v]}),O.names=[],O.skips=[],O.formatters={},O.selectColor=function(v){let p=0;for(let y=0;y<v.length;y++)p=(p<<5)-p+v.charCodeAt(y),p|=0;return O.colors[Math.abs(p)%O.colors.length]},O.enable(O.load()),O}},856:function(R){R.exports=function(){"use strict";function h(w){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},h(w)}function S(w,A){return S=Object.setPrototypeOf||function(H,J){return H.__proto__=J,H},S(w,A)}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(w,A,H){return O=E()?Reflect.construct:function(J,re,Fe){var Je=[null];Je.push.apply(Je,re);var Ne=new(Function.bind.apply(J,Je));return Fe&&S(Ne,Fe.prototype),Ne},O.apply(null,arguments)}function I(w){return V(w)||v(w)||p(w)||b()}function V(w){if(Array.isArray(w))return y(w)}function v(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function p(w,A){if(w){if(typeof w=="string")return y(w,A);var H=Object.prototype.toString.call(w).slice(8,-1);return H==="Object"&&w.constructor&&(H=w.constructor.name),H==="Map"||H==="Set"?Array.from(w):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?y(w,A):void 0}}function y(w,A){(A==null||A>w.length)&&(A=w.length);for(var H=0,J=new Array(A);H<A;H++)J[H]=w[H];return J}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=Object.hasOwnProperty,T=Object.setPrototypeOf,U=Object.isFrozen,B=Object.getPrototypeOf,k=Object.getOwnPropertyDescriptor,L=Object.freeze,s=Object.seal,l=Object.create,m=typeof Reflect<"u"&&Reflect,C=m.apply,W=m.construct;C||(C=function(w,A,H){return w.apply(A,H)}),L||(L=function(w){return w}),s||(s=function(w){return w}),W||(W=function(w,A){return O(w,I(A))});var Y=Q(Array.prototype.forEach),ne=Q(Array.prototype.pop),pe=Q(Array.prototype.push),be=Q(String.prototype.toLowerCase),_e=Q(String.prototype.match),le=Q(String.prototype.replace),Ie=Q(String.prototype.indexOf),f=Q(String.prototype.trim),g=Q(RegExp.prototype.test),F=we(TypeError);function Q(w){return function(A){for(var H=arguments.length,J=new Array(H>1?H-1:0),re=1;re<H;re++)J[re-1]=arguments[re];return C(w,A,J)}}function we(w){return function(){for(var A=arguments.length,H=new Array(A),J=0;J<A;J++)H[J]=arguments[J];return W(w,H)}}function P(w,A){T&&T(w,null);for(var H=A.length;H--;){var J=A[H];if(typeof J=="string"){var re=be(J);re!==J&&(U(A)||(A[H]=re),J=re)}w[J]=!0}return w}function G(w){var A,H=l(null);for(A in w)C(D,w,[A])&&(H[A]=w[A]);return H}function ie(w,A){for(;w!==null;){var H=k(w,A);if(H){if(H.get)return Q(H.get);if(typeof H.value=="function")return Q(H.value)}w=B(w)}function J(re){return console.warn("fallback value for",re),null}return J}var je=L(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xe=L(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$e=L(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),et=L(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ue=L(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),se=L(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ce=L(["#text"]),Oe=L(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ee=L(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Le=L(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Me=L(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Lt=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wt=s(/<%[\w\W]*|[\w\W]*%>/gm),Tn=s(/^data-[\-\w.\u00B7-\uFFFF]/),In=s(/^aria-[\-\w]+$/),Ln=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Fn=s(/^(?:\w+script|data):/i),tt=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sn=s(/^html$/i),Nn=function(){return typeof window>"u"?null:window},Mn=function(w,A){if(h(w)!=="object"||typeof w.createPolicy!="function")return null;var H=null,J="data-tt-policy-suffix";A.currentScript&&A.currentScript.hasAttribute(J)&&(H=A.currentScript.getAttribute(J));var re="dompurify"+(H?"#"+H:"");try{return w.createPolicy(re,{createHTML:function(Fe){return Fe}})}catch{return console.warn("TrustedTypes policy "+re+" could not be created."),null}};function lt(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nn(),A=function(o){return lt(o)};if(A.version="2.3.8",A.removed=[],!w||!w.document||w.document.nodeType!==9)return A.isSupported=!1,A;var H=w.document,J=w.document,re=w.DocumentFragment,Fe=w.HTMLTemplateElement,Je=w.Node,Ne=w.Element,Ze=w.NodeFilter,ut=w.NamedNodeMap,xt=ut===void 0?w.NamedNodeMap||w.MozNamedAttrMap:ut,Ft=w.HTMLFormElement,an=w.DOMParser,cn=w.trustedTypes,ft=Ne.prototype,ln=ie(ft,"cloneNode"),un=ie(ft,"nextSibling"),Pn=ie(ft,"childNodes"),nt=ie(ft,"parentNode");if(typeof Fe=="function"){var Nt=J.createElement("template");Nt.content&&Nt.content.ownerDocument&&(J=Nt.content.ownerDocument)}var ze=Mn(cn,H),fn=ze?ze.createHTML(""):"",pt=J,Mt=pt.implementation,pn=pt.createNodeIterator,dn=pt.createDocumentFragment,Rn=pt.getElementsByTagName,Pt=H.importNode,hn={};try{hn=G(J).documentMode?J.documentMode:{}}catch{}var ge={};A.isSupported=typeof nt=="function"&&Mt&&Mt.createHTMLDocument!==void 0&&hn!==9;var rt,He,Rt=Lt,Dt=wt,Ct=Tn,Te=In,Ut=Fn,dt=tt,$t=Ln,de=null,zt=P({},[].concat(I(je),I(xe),I($e),I(ue),I(Ce))),he=null,Ht=P({},[].concat(I(Oe),I(Ee),I(Le),I(Me))),oe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ht=null,qt=null,Bt=!0,Wt=!0,mn=!1,ot=!1,X=!1,Gt=!1,Jt=!1,Ke=!1,qe=!1,it=!1,Zt=!0,Ot=!0,Ve=!1,Be={},st=null,gn=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),vn=null,yn=P({},["audio","video","img","source","image","track"]),Kt=null,St=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Vt="http://www.w3.org/1998/Math/MathML",jt="http://www.w3.org/2000/svg",We="http://www.w3.org/1999/xhtml",At=We,bn=!1,_n=["application/xhtml+xml","text/html"],Dn="text/html",at=null,Un=J.createElement("form"),kt=function(o){return o instanceof RegExp||o instanceof Function},Yt=function(o){at&&at===o||(o&&h(o)==="object"||(o={}),o=G(o),de="ALLOWED_TAGS"in o?P({},o.ALLOWED_TAGS):zt,he="ALLOWED_ATTR"in o?P({},o.ALLOWED_ATTR):Ht,Kt="ADD_URI_SAFE_ATTR"in o?P(G(St),o.ADD_URI_SAFE_ATTR):St,vn="ADD_DATA_URI_TAGS"in o?P(G(yn),o.ADD_DATA_URI_TAGS):yn,st="FORBID_CONTENTS"in o?P({},o.FORBID_CONTENTS):gn,ht="FORBID_TAGS"in o?P({},o.FORBID_TAGS):{},qt="FORBID_ATTR"in o?P({},o.FORBID_ATTR):{},Be="USE_PROFILES"in o&&o.USE_PROFILES,Bt=o.ALLOW_ARIA_ATTR!==!1,Wt=o.ALLOW_DATA_ATTR!==!1,mn=o.ALLOW_UNKNOWN_PROTOCOLS||!1,ot=o.SAFE_FOR_TEMPLATES||!1,X=o.WHOLE_DOCUMENT||!1,Ke=o.RETURN_DOM||!1,qe=o.RETURN_DOM_FRAGMENT||!1,it=o.RETURN_TRUSTED_TYPE||!1,Jt=o.FORCE_BODY||!1,Zt=o.SANITIZE_DOM!==!1,Ot=o.KEEP_CONTENT!==!1,Ve=o.IN_PLACE||!1,$t=o.ALLOWED_URI_REGEXP||$t,At=o.NAMESPACE||We,o.CUSTOM_ELEMENT_HANDLING&&kt(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(oe.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&kt(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(oe.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(oe.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),rt=rt=_n.indexOf(o.PARSER_MEDIA_TYPE)===-1?Dn:o.PARSER_MEDIA_TYPE,He=rt==="application/xhtml+xml"?function(x){return x}:be,ot&&(Wt=!1),qe&&(Ke=!0),Be&&(de=P({},I(Ce)),he=[],Be.html===!0&&(P(de,je),P(he,Oe)),Be.svg===!0&&(P(de,xe),P(he,Ee),P(he,Me)),Be.svgFilters===!0&&(P(de,$e),P(he,Ee),P(he,Me)),Be.mathMl===!0&&(P(de,ue),P(he,Le),P(he,Me))),o.ADD_TAGS&&(de===zt&&(de=G(de)),P(de,o.ADD_TAGS)),o.ADD_ATTR&&(he===Ht&&(he=G(he)),P(he,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&P(Kt,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(st===gn&&(st=G(st)),P(st,o.FORBID_CONTENTS)),Ot&&(de["#text"]=!0),X&&P(de,["html","head","body"]),de.table&&(P(de,["tbody"]),delete ht.tbody),L&&L(o),at=o)},Xt=P({},["mi","mo","mn","ms","mtext"]),wn=P({},["foreignobject","desc","title","annotation-xml"]),$n=P({},["title","style","font","a","script"]),Et=P({},xe);P(Et,$e),P(Et,et);var Qt=P({},ue);P(Qt,se);var zn=function(o){var x=nt(o);x&&x.tagName||(x={namespaceURI:We,tagName:"template"});var _=be(o.tagName),ee=be(x.tagName);return o.namespaceURI===jt?x.namespaceURI===We?_==="svg":x.namespaceURI===Vt?_==="svg"&&(ee==="annotation-xml"||Xt[ee]):!!Et[_]:o.namespaceURI===Vt?x.namespaceURI===We?_==="math":x.namespaceURI===jt?_==="math"&&wn[ee]:!!Qt[_]:o.namespaceURI===We&&!(x.namespaceURI===jt&&!wn[ee])&&!(x.namespaceURI===Vt&&!Xt[ee])&&!Qt[_]&&($n[_]||!Et[_])},Pe=function(o){pe(A.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=fn}catch{o.remove()}}},xn=function(o,x){try{pe(A.removed,{attribute:x.getAttributeNode(o),from:x})}catch{pe(A.removed,{attribute:null,from:x})}if(x.removeAttribute(o),o==="is"&&!he[o])if(Ke||qe)try{Pe(x)}catch{}else try{x.setAttribute(o,"")}catch{}},Cn=function(o){var x,_;if(Jt)o="<remove></remove>"+o;else{var ee=_e(o,/^[\r\n\t ]+/);_=ee&&ee[0]}rt==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var ce=ze?ze.createHTML(o):o;if(At===We)try{x=new an().parseFromString(ce,rt)}catch{}if(!x||!x.documentElement){x=Mt.createDocument(At,"template",null);try{x.documentElement.innerHTML=bn?"":ce}catch{}}var ve=x.body||x.documentElement;return o&&_&&ve.insertBefore(J.createTextNode(_),ve.childNodes[0]||null),At===We?Rn.call(x,X?"html":"body")[0]:X?x.documentElement:ve},mt=function(o){return pn.call(o.ownerDocument||o,o,Ze.SHOW_ELEMENT|Ze.SHOW_COMMENT|Ze.SHOW_TEXT,null,!1)},Hn=function(o){return o instanceof Ft&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof xt)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},gt=function(o){return h(Je)==="object"?o instanceof Je:o&&h(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Re=function(o,x,_){ge[o]&&Y(ge[o],function(ee){ee.call(A,x,_,at)})},en=function(o){var x;if(Re("beforeSanitizeElements",o,null),Hn(o)||g(/[\u0080-\uFFFF]/,o.nodeName))return Pe(o),!0;var _=He(o.nodeName);if(Re("uponSanitizeElement",o,{tagName:_,allowedTags:de}),o.hasChildNodes()&&!gt(o.firstElementChild)&&(!gt(o.content)||!gt(o.content.firstElementChild))&&g(/<[/\w]/g,o.innerHTML)&&g(/<[/\w]/g,o.textContent)||_==="select"&&g(/<template/i,o.innerHTML))return Pe(o),!0;if(!de[_]||ht[_]){if(!ht[_]&&tn(_)&&(oe.tagNameCheck instanceof RegExp&&g(oe.tagNameCheck,_)||oe.tagNameCheck instanceof Function&&oe.tagNameCheck(_)))return!1;if(Ot&&!st[_]){var ee=nt(o)||o.parentNode,ce=Pn(o)||o.childNodes;if(ce&&ee)for(var ve=ce.length-1;ve>=0;--ve)ee.insertBefore(ln(ce[ve],!0),un(o))}return Pe(o),!0}return o instanceof Ne&&!zn(o)?(Pe(o),!0):_!=="noscript"&&_!=="noembed"||!g(/<\/no(script|embed)/i,o.innerHTML)?(ot&&o.nodeType===3&&(x=o.textContent,x=le(x,Rt," "),x=le(x,Dt," "),o.textContent!==x&&(pe(A.removed,{element:o.cloneNode()}),o.textContent=x)),Re("afterSanitizeElements",o,null),!1):(Pe(o),!0)},On=function(o,x,_){if(Zt&&(x==="id"||x==="name")&&(_ in J||_ in Un))return!1;if(!(Wt&&!qt[x]&&g(Ct,x))){if(!(Bt&&g(Te,x))){if(!he[x]||qt[x]){if(!(tn(o)&&(oe.tagNameCheck instanceof RegExp&&g(oe.tagNameCheck,o)||oe.tagNameCheck instanceof Function&&oe.tagNameCheck(o))&&(oe.attributeNameCheck instanceof RegExp&&g(oe.attributeNameCheck,x)||oe.attributeNameCheck instanceof Function&&oe.attributeNameCheck(x))||x==="is"&&oe.allowCustomizedBuiltInElements&&(oe.tagNameCheck instanceof RegExp&&g(oe.tagNameCheck,_)||oe.tagNameCheck instanceof Function&&oe.tagNameCheck(_))))return!1}else if(!Kt[x]){if(!g($t,le(_,dt,""))){if((x!=="src"&&x!=="xlink:href"&&x!=="href"||o==="script"||Ie(_,"data:")!==0||!vn[o])&&!(mn&&!g(Ut,le(_,dt,"")))){if(_)return!1}}}}}return!0},tn=function(o){return o.indexOf("-")>0},vt=function(o){var x,_,ee,ce;Re("beforeSanitizeAttributes",o,null);var ve=o.attributes;if(ve){var ye={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:he};for(ce=ve.length;ce--;){var yt=x=ve[ce],De=yt.name,Z=yt.namespaceURI;if(_=De==="value"?x.value:f(x.value),ee=He(De),ye.attrName=ee,ye.attrValue=_,ye.keepAttr=!0,ye.forceKeepAttr=void 0,Re("uponSanitizeAttribute",o,ye),_=ye.attrValue,!ye.forceKeepAttr&&(xn(De,o),ye.keepAttr))if(g(/\/>/i,_))xn(De,o);else{ot&&(_=le(_,Rt," "),_=le(_,Dt," "));var Ye=He(o.nodeName);if(On(Ye,ee,_))try{Z?o.setAttributeNS(Z,De,_):o.setAttribute(De,_),ne(A.removed)}catch{}}}Re("afterSanitizeAttributes",o,null)}},nn=function o(x){var _,ee=mt(x);for(Re("beforeSanitizeShadowDOM",x,null);_=ee.nextNode();)Re("uponSanitizeShadowNode",_,null),en(_)||(_.content instanceof re&&o(_.content),vt(_));Re("afterSanitizeShadowDOM",x,null)};return A.sanitize=function(o,x){var _,ee,ce,ve,ye;if((bn=!o)&&(o="<!-->"),typeof o!="string"&&!gt(o)){if(typeof o.toString!="function")throw F("toString is not a function");if(typeof(o=o.toString())!="string")throw F("dirty is not a string, aborting")}if(!A.isSupported){if(h(w.toStaticHTML)==="object"||typeof w.toStaticHTML=="function"){if(typeof o=="string")return w.toStaticHTML(o);if(gt(o))return w.toStaticHTML(o.outerHTML)}return o}if(Gt||Yt(x),A.removed=[],typeof o=="string"&&(Ve=!1),Ve){if(o.nodeName){var yt=He(o.nodeName);if(!de[yt]||ht[yt])throw F("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof Je)(ee=(_=Cn("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&ee.nodeName==="BODY"||ee.nodeName==="HTML"?_=ee:_.appendChild(ee);else{if(!Ke&&!ot&&!X&&o.indexOf("<")===-1)return ze&&it?ze.createHTML(o):o;if(!(_=Cn(o)))return Ke?null:it?fn:""}_&&Jt&&Pe(_.firstChild);for(var De=mt(Ve?o:_);ce=De.nextNode();)ce.nodeType===3&&ce===ve||en(ce)||(ce.content instanceof re&&nn(ce.content),vt(ce),ve=ce);if(ve=null,Ve)return o;if(Ke){if(qe)for(ye=dn.call(_.ownerDocument);_.firstChild;)ye.appendChild(_.firstChild);else ye=_;return he.shadowroot&&(ye=Pt.call(H,ye,!0)),ye}var Z=X?_.outerHTML:_.innerHTML;return X&&de["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&g(sn,_.ownerDocument.doctype.name)&&(Z="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+Z),ot&&(Z=le(Z,Rt," "),Z=le(Z,Dt," ")),ze&&it?ze.createHTML(Z):Z},A.setConfig=function(o){Yt(o),Gt=!0},A.clearConfig=function(){at=null,Gt=!1},A.isValidAttribute=function(o,x,_){at||Yt({});var ee=He(o),ce=He(x);return On(ee,ce,_)},A.addHook=function(o,x){typeof x=="function"&&(ge[o]=ge[o]||[],pe(ge[o],x))},A.removeHook=function(o){if(ge[o])return ne(ge[o])},A.removeHooks=function(o){ge[o]&&(ge[o]=[])},A.removeAllHooks=function(){ge={}},A}return lt()}()},729:R=>{"use strict";var h=Object.prototype.hasOwnProperty,S="~";function E(){}function O(p,y,b){this.fn=p,this.context=y,this.once=b||!1}function I(p,y,b,D,T){if(typeof b!="function")throw new TypeError("The listener must be a function");var U=new O(b,D||p,T),B=S?S+y:y;return p._events[B]?p._events[B].fn?p._events[B]=[p._events[B],U]:p._events[B].push(U):(p._events[B]=U,p._eventsCount++),p}function V(p,y){--p._eventsCount==0?p._events=new E:delete p._events[y]}function v(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(S=!1)),v.prototype.eventNames=function(){var p,y,b=[];if(this._eventsCount===0)return b;for(y in p=this._events)h.call(p,y)&&b.push(S?y.slice(1):y);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(p)):b},v.prototype.listeners=function(p){var y=S?S+p:p,b=this._events[y];if(!b)return[];if(b.fn)return[b.fn];for(var D=0,T=b.length,U=new Array(T);D<T;D++)U[D]=b[D].fn;return U},v.prototype.listenerCount=function(p){var y=S?S+p:p,b=this._events[y];return b?b.fn?1:b.length:0},v.prototype.emit=function(p,y,b,D,T,U){var B=S?S+p:p;if(!this._events[B])return!1;var k,L,s=this._events[B],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(p,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,y),!0;case 3:return s.fn.call(s.context,y,b),!0;case 4:return s.fn.call(s.context,y,b,D),!0;case 5:return s.fn.call(s.context,y,b,D,T),!0;case 6:return s.fn.call(s.context,y,b,D,T,U),!0}for(L=1,k=new Array(l-1);L<l;L++)k[L-1]=arguments[L];s.fn.apply(s.context,k)}else{var m,C=s.length;for(L=0;L<C;L++)switch(s[L].once&&this.removeListener(p,s[L].fn,void 0,!0),l){case 1:s[L].fn.call(s[L].context);break;case 2:s[L].fn.call(s[L].context,y);break;case 3:s[L].fn.call(s[L].context,y,b);break;case 4:s[L].fn.call(s[L].context,y,b,D);break;default:if(!k)for(m=1,k=new Array(l-1);m<l;m++)k[m-1]=arguments[m];s[L].fn.apply(s[L].context,k)}}return!0},v.prototype.on=function(p,y,b){return I(this,p,y,b,!1)},v.prototype.once=function(p,y,b){return I(this,p,y,b,!0)},v.prototype.removeListener=function(p,y,b,D){var T=S?S+p:p;if(!this._events[T])return this;if(!y)return V(this,T),this;var U=this._events[T];if(U.fn)U.fn!==y||D&&!U.once||b&&U.context!==b||V(this,T);else{for(var B=0,k=[],L=U.length;B<L;B++)(U[B].fn!==y||D&&!U[B].once||b&&U[B].context!==b)&&k.push(U[B]);k.length?this._events[T]=k.length===1?k[0]:k:V(this,T)}return this},v.prototype.removeAllListeners=function(p){var y;return p?(y=S?S+p:p,this._events[y]&&V(this,y)):(this._events=new E,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=S,v.EventEmitter=v,R.exports=v},717:R=>{typeof Object.create=="function"?R.exports=function(h,S){h.super_=S,h.prototype=Object.create(S.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:R.exports=function(h,S){h.super_=S;var E=function(){};E.prototype=S.prototype,h.prototype=new E,h.prototype.constructor=h}},824:R=>{var h=1e3,S=60*h,E=60*S,O=24*E,I=7*O,V=365.25*O;function v(p,y,b,D){var T=y>=1.5*b;return Math.round(p/b)+" "+D+(T?"s":"")}R.exports=function(p,y){y=y||{};var b=typeof p;if(b==="string"&&p.length>0)return function(D){if(!((D=String(D)).length>100)){var T=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(D);if(T){var U=parseFloat(T[1]);switch((T[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return U*V;case"weeks":case"week":case"w":return U*I;case"days":case"day":case"d":return U*O;case"hours":case"hour":case"hrs":case"hr":case"h":return U*E;case"minutes":case"minute":case"mins":case"min":case"m":return U*S;case"seconds":case"second":case"secs":case"sec":case"s":return U*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return U;default:return}}}}(p);if(b==="number"&&isFinite(p))return y.long?function(D){var T=Math.abs(D);return T>=O?v(D,T,O,"day"):T>=E?v(D,T,E,"hour"):T>=S?v(D,T,S,"minute"):T>=h?v(D,T,h,"second"):D+" ms"}(p):function(D){var T=Math.abs(D);return T>=O?Math.round(D/O)+"d":T>=E?Math.round(D/E)+"h":T>=S?Math.round(D/S)+"m":T>=h?Math.round(D/h)+"s":D+"ms"}(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},520:(R,h,S)=>{"use strict";var E=S(155),O=E.platform==="win32",I=S(539);function V(s,l){for(var m=[],C=0;C<s.length;C++){var W=s[C];W&&W!=="."&&(W===".."?m.length&&m[m.length-1]!==".."?m.pop():l&&m.push(".."):m.push(W))}return m}function v(s){for(var l=s.length-1,m=0;m<=l&&!s[m];m++);for(var C=l;C>=0&&!s[C];C--);return m===0&&C===l?s:m>C?[]:s.slice(m,C+1)}var p=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,y=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,b={};function D(s){var l=p.exec(s),m=(l[1]||"")+(l[2]||""),C=l[3]||"",W=y.exec(C);return[m,W[1],W[2],W[3]]}function T(s){var l=p.exec(s),m=l[1]||"",C=!!m&&m[1]!==":";return{device:m,isUnc:C,isAbsolute:C||!!l[2],tail:l[3]}}function U(s){return"\\\\"+s.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}b.resolve=function(){for(var s="",l="",m=!1,C=arguments.length-1;C>=-1;C--){var W;if(C>=0?W=arguments[C]:s?(W=E.env["="+s])&&W.substr(0,3).toLowerCase()===s.toLowerCase()+"\\"||(W=s+"\\"):W=E.cwd(),!I.isString(W))throw new TypeError("Arguments to path.resolve must be strings");if(W){var Y=T(W),ne=Y.device,pe=Y.isUnc,be=Y.isAbsolute,_e=Y.tail;if((!ne||!s||ne.toLowerCase()===s.toLowerCase())&&(s||(s=ne),m||(l=_e+"\\"+l,m=be),s&&m))break}}return pe&&(s=U(s)),s+(m?"\\":"")+(l=V(l.split(/[\\\/]+/),!m).join("\\"))||"."},b.normalize=function(s){var l=T(s),m=l.device,C=l.isUnc,W=l.isAbsolute,Y=l.tail,ne=/[\\\/]$/.test(Y);return(Y=V(Y.split(/[\\\/]+/),!W).join("\\"))||W||(Y="."),Y&&ne&&(Y+="\\"),C&&(m=U(m)),m+(W?"\\":"")+Y},b.isAbsolute=function(s){return T(s).isAbsolute},b.join=function(){for(var s=[],l=0;l<arguments.length;l++){var m=arguments[l];if(!I.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&s.push(m)}var C=s.join("\\");return/^[\\\/]{2}[^\\\/]/.test(s[0])||(C=C.replace(/^[\\\/]{2,}/,"\\")),b.normalize(C)},b.relative=function(s,l){s=b.resolve(s),l=b.resolve(l);for(var m=s.toLowerCase(),C=l.toLowerCase(),W=v(l.split("\\")),Y=v(m.split("\\")),ne=v(C.split("\\")),pe=Math.min(Y.length,ne.length),be=pe,_e=0;_e<pe;_e++)if(Y[_e]!==ne[_e]){be=_e;break}if(be==0)return l;var le=[];for(_e=be;_e<Y.length;_e++)le.push("..");return(le=le.concat(W.slice(be))).join("\\")},b._makeLong=function(s){if(!I.isString(s))return s;if(!s)return"";var l=b.resolve(s);return/^[a-zA-Z]\:\\/.test(l)?"\\\\?\\"+l:/^\\\\[^?.]/.test(l)?"\\\\?\\UNC\\"+l.substring(2):s},b.dirname=function(s){var l=D(s),m=l[0],C=l[1];return m||C?(C&&(C=C.substr(0,C.length-1)),m+C):"."},b.basename=function(s,l){var m=D(s)[2];return l&&m.substr(-1*l.length)===l&&(m=m.substr(0,m.length-l.length)),m},b.extname=function(s){return D(s)[3]},b.format=function(s){if(!I.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var l=s.root||"";if(!I.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);var m=s.dir,C=s.base||"";return m?m[m.length-1]===b.sep?m+C:m+b.sep+C:C},b.parse=function(s){if(!I.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var l=D(s);if(!l||l.length!==4)throw new TypeError("Invalid path '"+s+"'");return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},b.sep="\\",b.delimiter=";";var B=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,k={};function L(s){return B.exec(s).slice(1)}k.resolve=function(){for(var s="",l=!1,m=arguments.length-1;m>=-1&&!l;m--){var C=m>=0?arguments[m]:E.cwd();if(!I.isString(C))throw new TypeError("Arguments to path.resolve must be strings");C&&(s=C+"/"+s,l=C[0]==="/")}return(l?"/":"")+(s=V(s.split("/"),!l).join("/"))||"."},k.normalize=function(s){var l=k.isAbsolute(s),m=s&&s[s.length-1]==="/";return(s=V(s.split("/"),!l).join("/"))||l||(s="."),s&&m&&(s+="/"),(l?"/":"")+s},k.isAbsolute=function(s){return s.charAt(0)==="/"},k.join=function(){for(var s="",l=0;l<arguments.length;l++){var m=arguments[l];if(!I.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&(s+=s?"/"+m:m)}return k.normalize(s)},k.relative=function(s,l){s=k.resolve(s).substr(1),l=k.resolve(l).substr(1);for(var m=v(s.split("/")),C=v(l.split("/")),W=Math.min(m.length,C.length),Y=W,ne=0;ne<W;ne++)if(m[ne]!==C[ne]){Y=ne;break}var pe=[];for(ne=Y;ne<m.length;ne++)pe.push("..");return(pe=pe.concat(C.slice(Y))).join("/")},k._makeLong=function(s){return s},k.dirname=function(s){var l=L(s),m=l[0],C=l[1];return m||C?(C&&(C=C.substr(0,C.length-1)),m+C):"."},k.basename=function(s,l){var m=L(s)[2];return l&&m.substr(-1*l.length)===l&&(m=m.substr(0,m.length-l.length)),m},k.extname=function(s){return L(s)[3]},k.format=function(s){if(!I.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var l=s.root||"";if(!I.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);return(s.dir?s.dir+k.sep:"")+(s.base||"")},k.parse=function(s){if(!I.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var l=L(s);if(!l||l.length!==4)throw new TypeError("Invalid path '"+s+"'");return l[1]=l[1]||"",l[2]=l[2]||"",l[3]=l[3]||"",{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},k.sep="/",k.delimiter=":",R.exports=O?b:k,R.exports.posix=k,R.exports.win32=b},155:R=>{var h,S,E=R.exports={};function O(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}function V(k){if(h===setTimeout)return setTimeout(k,0);if((h===O||!h)&&setTimeout)return h=setTimeout,setTimeout(k,0);try{return h(k,0)}catch{try{return h.call(null,k,0)}catch{return h.call(this,k,0)}}}(function(){try{h=typeof setTimeout=="function"?setTimeout:O}catch{h=O}try{S=typeof clearTimeout=="function"?clearTimeout:I}catch{S=I}})();var v,p=[],y=!1,b=-1;function D(){y&&v&&(y=!1,v.length?p=v.concat(p):b=-1,p.length&&T())}function T(){if(!y){var k=V(D);y=!0;for(var L=p.length;L;){for(v=p,p=[];++b<L;)v&&v[b].run();b=-1,L=p.length}v=null,y=!1,function(s){if(S===clearTimeout)return clearTimeout(s);if((S===I||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(s);try{S(s)}catch{try{return S.call(null,s)}catch{return S.call(this,s)}}}(k)}}function U(k,L){this.fun=k,this.array=L}function B(){}E.nextTick=function(k){var L=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)L[s-1]=arguments[s];p.push(new U(k,L)),p.length!==1||y||V(T)},U.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=B,E.addListener=B,E.once=B,E.off=B,E.removeListener=B,E.removeAllListeners=B,E.emit=B,E.prependListener=B,E.prependOnceListener=B,E.listeners=function(k){return[]},E.binding=function(k){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(k){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},384:R=>{R.exports=function(h){return h&&typeof h=="object"&&typeof h.copy=="function"&&typeof h.fill=="function"&&typeof h.readUInt8=="function"}},539:(R,h,S)=>{var E=S(155),O=/%[sdj%]/g;h.format=function(f){if(!s(f)){for(var g=[],F=0;F<arguments.length;F++)g.push(v(arguments[F]));return g.join(" ")}F=1;for(var Q=arguments,we=Q.length,P=String(f).replace(O,function(ie){if(ie==="%%")return"%";if(F>=we)return ie;switch(ie){case"%s":return String(Q[F++]);case"%d":return Number(Q[F++]);case"%j":try{return JSON.stringify(Q[F++])}catch{return"[Circular]"}default:return ie}}),G=Q[F];F<we;G=Q[++F])k(G)||!C(G)?P+=" "+G:P+=" "+v(G);return P},h.deprecate=function(f,g){if(l(S.g.process))return function(){return h.deprecate(f,g).apply(this,arguments)};if(E.noDeprecation===!0)return f;var F=!1;return function(){if(!F){if(E.throwDeprecation)throw new Error(g);E.traceDeprecation?console.trace(g):console.error(g),F=!0}return f.apply(this,arguments)}};var I,V={};function v(f,g){var F={seen:[],stylize:y};return arguments.length>=3&&(F.depth=arguments[2]),arguments.length>=4&&(F.colors=arguments[3]),B(g)?F.showHidden=g:g&&h._extend(F,g),l(F.showHidden)&&(F.showHidden=!1),l(F.depth)&&(F.depth=2),l(F.colors)&&(F.colors=!1),l(F.customInspect)&&(F.customInspect=!0),F.colors&&(F.stylize=p),b(F,f,F.depth)}function p(f,g){var F=v.styles[g];return F?"\x1B["+v.colors[F][0]+"m"+f+"\x1B["+v.colors[F][1]+"m":f}function y(f,g){return f}function b(f,g,F){if(f.customInspect&&g&&ne(g.inspect)&&g.inspect!==h.inspect&&(!g.constructor||g.constructor.prototype!==g)){var Q=g.inspect(F,f);return s(Q)||(Q=b(f,Q,F)),Q}var we=function(ue,se){if(l(se))return ue.stylize("undefined","undefined");if(s(se)){var Ce="'"+JSON.stringify(se).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ue.stylize(Ce,"string")}if(L(se))return ue.stylize(""+se,"number");if(B(se))return ue.stylize(""+se,"boolean");if(k(se))return ue.stylize("null","null")}(f,g);if(we)return we;var P=Object.keys(g),G=function(ue){var se={};return ue.forEach(function(Ce,Oe){se[Ce]=!0}),se}(P);if(f.showHidden&&(P=Object.getOwnPropertyNames(g)),Y(g)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return D(g);if(P.length===0){if(ne(g)){var ie=g.name?": "+g.name:"";return f.stylize("[Function"+ie+"]","special")}if(m(g))return f.stylize(RegExp.prototype.toString.call(g),"regexp");if(W(g))return f.stylize(Date.prototype.toString.call(g),"date");if(Y(g))return D(g)}var je,xe="",$e=!1,et=["{","}"];return U(g)&&($e=!0,et=["[","]"]),ne(g)&&(xe=" [Function"+(g.name?": "+g.name:"")+"]"),m(g)&&(xe=" "+RegExp.prototype.toString.call(g)),W(g)&&(xe=" "+Date.prototype.toUTCString.call(g)),Y(g)&&(xe=" "+D(g)),P.length!==0||$e&&g.length!=0?F<0?m(g)?f.stylize(RegExp.prototype.toString.call(g),"regexp"):f.stylize("[Object]","special"):(f.seen.push(g),je=$e?function(ue,se,Ce,Oe,Ee){for(var Le=[],Me=0,Lt=se.length;Me<Lt;++Me)Ie(se,String(Me))?Le.push(T(ue,se,Ce,Oe,String(Me),!0)):Le.push("");return Ee.forEach(function(wt){wt.match(/^\d+$/)||Le.push(T(ue,se,Ce,Oe,wt,!0))}),Le}(f,g,F,G,P):P.map(function(ue){return T(f,g,F,G,ue,$e)}),f.seen.pop(),function(ue,se,Ce){return ue.reduce(function(Oe,Ee){return Ee.indexOf(`
`)>=0,Oe+Ee.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ce[0]+(se===""?"":se+`
 `)+" "+ue.join(`,
  `)+" "+Ce[1]:Ce[0]+se+" "+ue.join(", ")+" "+Ce[1]}(je,xe,et)):et[0]+xe+et[1]}function D(f){return"["+Error.prototype.toString.call(f)+"]"}function T(f,g,F,Q,we,P){var G,ie,je;if((je=Object.getOwnPropertyDescriptor(g,we)||{value:g[we]}).get?ie=je.set?f.stylize("[Getter/Setter]","special"):f.stylize("[Getter]","special"):je.set&&(ie=f.stylize("[Setter]","special")),Ie(Q,we)||(G="["+we+"]"),ie||(f.seen.indexOf(je.value)<0?(ie=k(F)?b(f,je.value,null):b(f,je.value,F-1)).indexOf(`
`)>-1&&(ie=P?ie.split(`
`).map(function(xe){return"  "+xe}).join(`
`).substr(2):`
`+ie.split(`
`).map(function(xe){return"   "+xe}).join(`
`)):ie=f.stylize("[Circular]","special")),l(G)){if(P&&we.match(/^\d+$/))return ie;(G=JSON.stringify(""+we)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(G=G.substr(1,G.length-2),G=f.stylize(G,"name")):(G=G.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),G=f.stylize(G,"string"))}return G+": "+ie}function U(f){return Array.isArray(f)}function B(f){return typeof f=="boolean"}function k(f){return f===null}function L(f){return typeof f=="number"}function s(f){return typeof f=="string"}function l(f){return f===void 0}function m(f){return C(f)&&pe(f)==="[object RegExp]"}function C(f){return typeof f=="object"&&f!==null}function W(f){return C(f)&&pe(f)==="[object Date]"}function Y(f){return C(f)&&(pe(f)==="[object Error]"||f instanceof Error)}function ne(f){return typeof f=="function"}function pe(f){return Object.prototype.toString.call(f)}function be(f){return f<10?"0"+f.toString(10):f.toString(10)}h.debuglog=function(f){if(l(I)&&(I=E.env.NODE_DEBUG||""),f=f.toUpperCase(),!V[f])if(new RegExp("\\b"+f+"\\b","i").test(I)){var g=E.pid;V[f]=function(){var F=h.format.apply(h,arguments);console.error("%s %d: %s",f,g,F)}}else V[f]=function(){};return V[f]},h.inspect=v,v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=U,h.isBoolean=B,h.isNull=k,h.isNullOrUndefined=function(f){return f==null},h.isNumber=L,h.isString=s,h.isSymbol=function(f){return typeof f=="symbol"},h.isUndefined=l,h.isRegExp=m,h.isObject=C,h.isDate=W,h.isError=Y,h.isFunction=ne,h.isPrimitive=function(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||typeof f=="symbol"||f===void 0},h.isBuffer=S(384);var _e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function le(){var f=new Date,g=[be(f.getHours()),be(f.getMinutes()),be(f.getSeconds())].join(":");return[f.getDate(),_e[f.getMonth()],g].join(" ")}function Ie(f,g){return Object.prototype.hasOwnProperty.call(f,g)}h.log=function(){console.log("%s - %s",le(),h.format.apply(h,arguments))},h.inherits=S(717),h._extend=function(f,g){if(!g||!C(g))return f;for(var F=Object.keys(g),Q=F.length;Q--;)f[F[Q]]=g[F[Q]];return f}}},ae={};function te(R){var h=ae[R];if(h!==void 0)return h.exports;var S=ae[R]={exports:{}};return me[R].call(S.exports,S,S.exports,te),S.exports}te.n=R=>{var h=R&&R.__esModule?()=>R.default:()=>R;return te.d(h,{a:h}),h},te.d=(R,h)=>{for(var S in h)te.o(h,S)&&!te.o(R,S)&&Object.defineProperty(R,S,{enumerable:!0,get:h[S]})},te.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),te.o=(R,h)=>Object.prototype.hasOwnProperty.call(R,h),te.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var Qe={};return(()=>{"use strict";te.r(Qe),te.d(Qe,{LSPluginUser:()=>tr,setupPluginUserInstance:()=>Lr});var R=te(520);te(856);let h=function(){this.__data__=[],this.size=0},S=function(t,e){return t===e||t!=t&&e!=e},E=function(t,e){for(var n=t.length;n--;)if(S(t[n][0],e))return n;return-1};var O=Array.prototype.splice;let I=function(t){var e=this.__data__,n=E(e,t);return!(n<0)&&(n==e.length-1?e.pop():O.call(e,n,1),--this.size,!0)},V=function(t){var e=this.__data__,n=E(e,t);return n<0?void 0:e[n][1]},v=function(t){return E(this.__data__,t)>-1},p=function(t,e){var n=this.__data__,r=E(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function y(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}y.prototype.clear=h,y.prototype.delete=I,y.prototype.get=V,y.prototype.has=v,y.prototype.set=p;let b=y,D=function(){this.__data__=new b,this.size=0},T=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},U=function(t){return this.__data__.get(t)},B=function(t){return this.__data__.has(t)},k=typeof global=="object"&&global&&global.Object===Object&&global;var L=typeof self=="object"&&self&&self.Object===Object&&self;let s=k||L||Function("return this")(),l=s.Symbol;var m=Object.prototype,C=m.hasOwnProperty,W=m.toString,Y=l?l.toStringTag:void 0;let ne=function(t){var e=C.call(t,Y),n=t[Y];try{t[Y]=void 0;var r=!0}catch{}var i=W.call(t);return r&&(e?t[Y]=n:delete t[Y]),i};var pe=Object.prototype.toString;let be=function(t){return pe.call(t)};var _e=l?l.toStringTag:void 0;let le=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":_e&&_e in Object(t)?ne(t):be(t)},Ie=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},f=function(t){if(!Ie(t))return!1;var e=le(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},g=s["__core-js_shared__"];var F,Q=(F=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";let we=function(t){return!!Q&&Q in t};var P=Function.prototype.toString;let G=function(t){if(t!=null){try{return P.call(t)}catch{}try{return t+""}catch{}}return""};var ie=/^\[object .+?Constructor\]$/,je=Function.prototype,xe=Object.prototype,$e=je.toString,et=xe.hasOwnProperty,ue=RegExp("^"+$e.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let se=function(t){return!(!Ie(t)||we(t))&&(f(t)?ue:ie).test(G(t))},Ce=function(t,e){return t?.[e]},Oe=function(t,e){var n=Ce(t,e);return se(n)?n:void 0},Ee=Oe(s,"Map"),Le=Oe(Object,"create"),Me=function(){this.__data__=Le?Le(null):{},this.size=0},Lt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var wt=Object.prototype.hasOwnProperty;let Tn=function(t){var e=this.__data__;if(Le){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return wt.call(e,t)?e[t]:void 0};var In=Object.prototype.hasOwnProperty;let Ln=function(t){var e=this.__data__;return Le?e[t]!==void 0:In.call(e,t)},Fn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Le&&e===void 0?"__lodash_hash_undefined__":e,this};function tt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}tt.prototype.clear=Me,tt.prototype.delete=Lt,tt.prototype.get=Tn,tt.prototype.has=Ln,tt.prototype.set=Fn;let sn=tt,Nn=function(){this.size=0,this.__data__={hash:new sn,map:new(Ee||b),string:new sn}},Mn=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},lt=function(t,e){var n=t.__data__;return Mn(e)?n[typeof e=="string"?"string":"hash"]:n.map},w=function(t){var e=lt(this,t).delete(t);return this.size-=e?1:0,e},A=function(t){return lt(this,t).get(t)},H=function(t){return lt(this,t).has(t)},J=function(t,e){var n=lt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function re(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}re.prototype.clear=Nn,re.prototype.delete=w,re.prototype.get=A,re.prototype.has=H,re.prototype.set=J;let Fe=re,Je=function(t,e){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Ee||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fe(r)}return n.set(t,e),this.size=n.size,this};function Ne(t){var e=this.__data__=new b(t);this.size=e.size}Ne.prototype.clear=D,Ne.prototype.delete=T,Ne.prototype.get=U,Ne.prototype.has=B,Ne.prototype.set=Je;let Ze=Ne,ut=function(){try{var t=Oe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),xt=function(t,e,n){e=="__proto__"&&ut?ut(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Ft=function(t,e,n){(n!==void 0&&!S(t[e],n)||n===void 0&&!(e in t))&&xt(t,e,n)},an=function(t){return function(e,n,r){for(var i=-1,a=Object(e),c=r(e),u=c.length;u--;){var d=c[t?u:++i];if(n(a[d],d,a)===!1)break}return e}}();var cn=typeof Se=="object"&&Se&&!Se.nodeType&&Se,ft=cn&&typeof ke=="object"&&ke&&!ke.nodeType&&ke,ln=ft&&ft.exports===cn?s.Buffer:void 0,un=ln?ln.allocUnsafe:void 0;let Pn=function(t,e){if(e)return t.slice();var n=t.length,r=un?un(n):new t.constructor(n);return t.copy(r),r},nt=s.Uint8Array,Nt=function(t){var e=new t.constructor(t.byteLength);return new nt(e).set(new nt(t)),e},ze=function(t,e){var n=e?Nt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},fn=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var pt=Object.create;let Mt=function(){function t(){}return function(e){if(!Ie(e))return{};if(pt)return pt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),pn=function(t,e){return function(n){return t(e(n))}},dn=pn(Object.getPrototypeOf,Object);var Rn=Object.prototype;let Pt=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Rn)},hn=function(t){return typeof t.constructor!="function"||Pt(t)?{}:Mt(dn(t))},ge=function(t){return t!=null&&typeof t=="object"},rt=function(t){return ge(t)&&le(t)=="[object Arguments]"};var He=Object.prototype,Rt=He.hasOwnProperty,Dt=He.propertyIsEnumerable;let Ct=rt(function(){return arguments}())?rt:function(t){return ge(t)&&Rt.call(t,"callee")&&!Dt.call(t,"callee")},Te=Array.isArray,Ut=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},dt=function(t){return t!=null&&Ut(t.length)&&!f(t)},$t=function(t){return ge(t)&&dt(t)},de=function(){return!1};var zt=typeof Se=="object"&&Se&&!Se.nodeType&&Se,he=zt&&typeof ke=="object"&&ke&&!ke.nodeType&&ke,Ht=he&&he.exports===zt?s.Buffer:void 0;let oe=(Ht?Ht.isBuffer:void 0)||de;var ht=Function.prototype,qt=Object.prototype,Bt=ht.toString,Wt=qt.hasOwnProperty,mn=Bt.call(Object);let ot=function(t){if(!ge(t)||le(t)!="[object Object]")return!1;var e=dn(t);if(e===null)return!0;var n=Wt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Bt.call(n)==mn};var X={};X["[object Float32Array]"]=X["[object Float64Array]"]=X["[object Int8Array]"]=X["[object Int16Array]"]=X["[object Int32Array]"]=X["[object Uint8Array]"]=X["[object Uint8ClampedArray]"]=X["[object Uint16Array]"]=X["[object Uint32Array]"]=!0,X["[object Arguments]"]=X["[object Array]"]=X["[object ArrayBuffer]"]=X["[object Boolean]"]=X["[object DataView]"]=X["[object Date]"]=X["[object Error]"]=X["[object Function]"]=X["[object Map]"]=X["[object Number]"]=X["[object Object]"]=X["[object RegExp]"]=X["[object Set]"]=X["[object String]"]=X["[object WeakMap]"]=!1;let Gt=function(t){return ge(t)&&Ut(t.length)&&!!X[le(t)]},Jt=function(t){return function(e){return t(e)}};var Ke=typeof Se=="object"&&Se&&!Se.nodeType&&Se,qe=Ke&&typeof ke=="object"&&ke&&!ke.nodeType&&ke,it=qe&&qe.exports===Ke&&k.process,Zt=function(){try{var t=qe&&qe.require&&qe.require("util").types;return t||it&&it.binding&&it.binding("util")}catch{}}(),Ot=Zt&&Zt.isTypedArray;let Ve=Ot?Jt(Ot):Gt,Be=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var st=Object.prototype.hasOwnProperty;let gn=function(t,e,n){var r=t[e];st.call(t,e)&&S(r,n)&&(n!==void 0||e in t)||xt(t,e,n)},vn=function(t,e,n,r){var i=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var u=e[a],d=r?r(n[u],t[u],u,n,t):void 0;d===void 0&&(d=t[u]),i?xt(n,u,d):gn(n,u,d)}return n},yn=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Kt=/^(?:0|[1-9]\d*)$/;let St=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&Kt.test(t))&&t>-1&&t%1==0&&t<e};var Vt=Object.prototype.hasOwnProperty;let jt=function(t,e){var n=Te(t),r=!n&&Ct(t),i=!n&&!r&&oe(t),a=!n&&!r&&!i&&Ve(t),c=n||r||i||a,u=c?yn(t.length,String):[],d=u.length;for(var j in t)!e&&!Vt.call(t,j)||c&&(j=="length"||i&&(j=="offset"||j=="parent")||a&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||St(j,d))||u.push(j);return u},We=function(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e};var At=Object.prototype.hasOwnProperty;let bn=function(t){if(!Ie(t))return We(t);var e=Pt(t),n=[];for(var r in t)(r!="constructor"||!e&&At.call(t,r))&&n.push(r);return n},_n=function(t){return dt(t)?jt(t,!0):bn(t)},Dn=function(t){return vn(t,_n(t))},at=function(t,e,n,r,i,a,c){var u=Be(t,n),d=Be(e,n),j=c.get(d);if(j)Ft(t,n,j);else{var $=a?a(u,d,n+"",t,e,c):void 0,N=$===void 0;if(N){var M=Te(d),z=!M&&oe(d),q=!M&&!z&&Ve(d);$=d,M||z||q?Te(u)?$=u:$t(u)?$=fn(u):z?(N=!1,$=Pn(d,!0)):q?(N=!1,$=ze(d,!0)):$=[]:ot(d)||Ct(d)?($=u,Ct(u)?$=Dn(u):Ie(u)&&!f(u)||($=hn(d))):N=!1}N&&(c.set(d,$),i($,d,r,a,c),c.delete(d)),Ft(t,n,$)}},Un=function t(e,n,r,i,a){e!==n&&an(n,function(c,u){if(a||(a=new Ze),Ie(c))at(e,n,u,r,t,i,a);else{var d=i?i(Be(e,u),c,u+"",e,n,a):void 0;d===void 0&&(d=c),Ft(e,u,d)}},_n)},kt=function(t){return t},Yt=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Xt=Math.max;let wn=function(t,e,n){return e=Xt(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Xt(r.length-e,0),c=Array(a);++i<a;)c[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=n(c),Yt(t,this,u)}},$n=function(t){return function(){return t}},Et=ut?function(t,e){return ut(t,"toString",{configurable:!0,enumerable:!1,value:$n(e),writable:!0})}:kt;var Qt=Date.now;let zn=function(t){var e=0,n=0;return function(){var r=Qt(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Et),Pe=function(t,e){return zn(wn(t,e,kt),t+"")},xn=function(t,e,n){if(!Ie(n))return!1;var r=typeof e;return!!(r=="number"?dt(n)&&St(e,n.length):r=="string"&&e in n)&&S(n[e],t)},Cn=function(t){return Pe(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,c&&xn(n[0],n[1],c)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}(function(t,e,n){Un(t,e,n)});var mt=function(){return mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mt.apply(this,arguments)};function Hn(t){return t.toLowerCase()}var gt=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Re=/[^A-Z0-9]+/gi;function en(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function On(t,e){return e===void 0&&(e={}),function(n,r){r===void 0&&(r={});for(var i=r.splitRegexp,a=i===void 0?gt:i,c=r.stripRegexp,u=c===void 0?Re:c,d=r.transform,j=d===void 0?Hn:d,$=r.delimiter,N=$===void 0?" ":$,M=en(en(n,a,"$1\0$2"),u,"\0"),z=0,q=M.length;M.charAt(z)==="\0";)z++;for(;M.charAt(q-1)==="\0";)q--;return M.slice(z,q).split("\0").map(j).join(N)}(t,mt({delimiter:"."},e))}var tn=te(729),vt=te.n(tn);function nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let o=navigator.platform.toLowerCase()==="win32"?R.win32:R.posix,x=function(t,e){return e===void 0&&(e={}),On(t,mt({delimiter:"_"},e))},_=Cn;class ee extends vt(){constructor(e,n){super(),nn(this,"_tag",void 0),nn(this,"_opts",void 0),nn(this,"_logs",[]),this._tag=e,this._opts=n}write(e,n,r){var i;n!=null&&n.length&&n[n.length-1]===!0&&(r=!0,n.pop());let a=n.reduce((u,d)=>(d&&d instanceof Error?u+=`${d.message} ${d.stack}`:u+=d.toString(),u),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var c;this._logs.push([e,a]),(r||(i=this._opts)!==null&&i!==void 0&&i.console)&&((c=console)===null||c===void 0||c[e==="ERROR"?"error":"debug"](`${e}: ${a}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function ce(t,...e){try{let n=new URL(t);if(!n.origin)throw new Error(null);let r=o.join(t.substr(n.origin.length),...e);return n.origin+r}catch{return o.join(t,...e)}}function ve(t,e){let n,r,i=!1,a=u=>d=>{t&&clearTimeout(t),u(d),i=!0},c=new Promise((u,d)=>{n=a(u),r=a(d),t&&(t=setTimeout(()=>r(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:u=>e=u,resolve:n,reject:r,promise:c,get settled(){return i}}}let ye=new Map;window.__injectedUIEffects=ye;var yt=te(227),De=te.n(yt);function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let Ye="application/x-postmate-v1+json",nr=0,Mr={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},qn=(t,e)=>(typeof e!="string"||t.origin===e)&&!!t.data&&(typeof t.data!="object"||"postmate"in t.data)&&t.data.type===Ye&&!!Mr[t.data.postmate];class Pr{constructor(e){Z(this,"parent",void 0),Z(this,"frame",void 0),Z(this,"child",void 0),Z(this,"events",{}),Z(this,"childOrigin",void 0),Z(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!qn(n,this.childOrigin))return!1;let{data:r,name:i}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&i in this.events&&this.events[i].forEach(a=>{a.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...n){return new Promise(r=>{let i=++nr,a=c=>{c.data.uid===i&&c.data.postmate==="reply"&&(this.parent.removeEventListener("message",a,!1),r(c.data.value))};this.parent.addEventListener("message",a,!1),this.child.postMessage({postmate:"request",type:Ye,property:e,args:n,uid:i},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:Ye,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Rr{constructor(e){Z(this,"model",void 0),Z(this,"parent",void 0),Z(this,"parentOrigin",void 0),Z(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!qn(n,this.parentOrigin))return;let{property:r,uid:i,data:a,args:c}=n.data;n.data.postmate!=="call"?((u,d,j)=>{let $=typeof u[d]=="function"?u[d].apply(null,j):u[d];return Promise.resolve($)})(this.model,r,c).then(u=>{n.source.postMessage({property:r,postmate:"reply",type:Ye,uid:i,value:u},n.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](a)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:Ye,value:{name:e,data:n}},this.parentOrigin)}}class Bn{constructor(e){Z(this,"container",void 0),Z(this,"parent",void 0),Z(this,"frame",void 0),Z(this,"child",void 0),Z(this,"childOrigin",void 0),Z(this,"url",void 0),Z(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){let n=(a=>{let c=document.createElement("a");c.href=a;let u=c.protocol.length>4?c.protocol:window.location.protocol,d=c.host.length?c.port==="80"||c.port==="443"?c.hostname:c.host:window.location.host;return c.origin||`${u}//${d}`})(e=e||this.url),r,i=0;return new Promise((a,c)=>{let u=j=>!!qn(j,n)&&(j.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",u,!1),this.childOrigin=j.origin,a(new Pr(this))):c("Failed handshake"));this.parent.addEventListener("message",u,!1);let d=()=>{i++,this.child.postMessage({postmate:"handshake",type:Ye,model:this.model},n),i===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{d(),r=setInterval(d,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}Z(Bn,"debug",!1),Z(Bn,"Model",void 0);class Dr{constructor(e){Z(this,"child",void 0),Z(this,"model",void 0),Z(this,"parent",void 0),Z(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{let r=i=>{if(i.data.postmate){if(i.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),i.source.postMessage({postmate:"handshake-reply",type:Ye},i.origin),this.parentOrigin=i.origin;let a=i.data.model;return a&&Object.keys(a).forEach(c=>{this.model[c]=a[c]}),e(new Rr(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let{importHTML:Ur,createSandboxContainer:$r}=window.QSandbox||{};function zr(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,r)=>{try{let i=await window.apis.doAction(["readFile",t]);n({text:()=>i})}catch(i){console.error(i),r(i)}}))}class Hr extends vt(){constructor(e){super(),rn(this,"_pluginLocal",void 0),rn(this,"_frame",void 0),rn(this,"_root",void 0),rn(this,"_loaded",!1),rn(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){let{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;let{template:r,execScripts:i}=await Ur(n,{fetch:zr});this._mount(r,document.body);let a=$r(e,{elementGetter:()=>{var u;return(u=this._root)===null||u===void 0?void 0:u.firstChild}}).instance.proxy;a.__shadow_mode__=!0,a.LSPluginLocal=this._pluginLocal,a.LSPluginShadow=this,a.LSPluginUser=a.logseq=new tr(this._pluginLocal.toJSON(),this._pluginLocal.caller);let c=await i(a,!0);this._unmountFns.push(c.unmount),this._loaded=!0}_mount(e,n){let r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(r),this.emit("mounted")}_unmount(){for(let e of this._unmountFns)e&&e.call(null)}destroy(){var e,n;(e=this.frame)===null||e===void 0||(n=e.parentNode)===null||n===void 0||n.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return(e=this._root)===null||e===void 0?void 0:e.firstChild}get frame(){return this._frame}}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let ct=De()("LSPlugin:caller"),on="#await#response#",qr="#lspmsg#",rr="#lspmsg#error#",Sn=t=>`#lspmsg#${t}`;class Br extends vt(){constructor(e){super(),Ge(this,"_pluginLocal",void 0),Ge(this,"_connected",!1),Ge(this,"_parent",void 0),Ge(this,"_child",void 0),Ge(this,"_shadow",void 0),Ge(this,"_status",void 0),Ge(this,"_userModel",{}),Ge(this,"_call",void 0),Ge(this,"_callUserModel",void 0),Ge(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;let{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;let n=this,r=this._pluginLocal!=null,i=0,a=0,c=new Map,u=ve(6e4),d=this._extendUserModel({"#lspmsg#ready#":async N=>{d[Sn(N?.pid)]=({type:M,payload:z})=>{ct(`[host (_call) -> *user] ${this._debugTag}`,M,z),n.emit(M,z)},await u.resolve()},"#lspmsg#beforeunload#":async N=>{let M=ve(1e4);n.emit("beforeunload",Object.assign({actor:M},N)),await M.promise},"#lspmsg#settings#":async({type:N,payload:M})=>{n.emit("settings:changed",M)},[qr]:async({ns:N,type:M,payload:z})=>{ct(`[host (async) -> *user] ${this._debugTag} ns=${N} type=${M}`,z),N&&N.startsWith("hook")?n.emit(`${N}:${M}`,z):n.emit(M,z)},"#lspmsg#reply#":({_sync:N,result:M})=>{if(ct(`[sync host -> *user] #${N}`,M),c.has(N)){let z=c.get(N);z&&(M!=null&&M.hasOwnProperty(rr)?z.reject(M[rr]):z.resolve(M),c.delete(N))}},...e});var j;if(r)return await u.promise,JSON.parse(JSON.stringify((j=this._pluginLocal)===null||j===void 0?void 0:j.toJSON()));let $=new Dr(d).sendHandshakeReply();return this._status="pending",await $.then(N=>{this._child=N,this._connected=!0,this._call=async(M,z={},q)=>{if(q){let K=++a;c.set(K,q),z._sync=K,q.setTag(`async call #${K}`),ct(`async call #${K}`)}return N.emit(Sn(d.baseInfo.id),{type:M,payload:z}),q?.promise},this._callUserModel=async(M,z)=>{try{d[M](z)}catch{ct(`[model method] #${M} not existed`)}},i=setInterval(()=>{if(c.size>100)for(let[M,z]of c)z.settled&&c.delete(M)},18e5)}).finally(()=>{this._status=void 0}),await u.promise,d.baseInfo}async call(e,n={}){var r;return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n)}async callAsync(e,n={}){var r;let i=ve(1e4);return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n,i)}async callUserModel(e,...n){var r;return(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async callUserModelAsync(e,...n){var r;return e=`${on}${e}`,(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async _setupIframeSandbox(){let e=this._pluginLocal,n=e.id,r=`${n}_lsp_main`,i=new URL(e.options.entry);i.searchParams.set("__v__",e.options.version);let a=document.querySelector(`#${r}`);a&&a.parentElement.removeChild(a);let c=document.createElement("div");c.classList.add("lsp-iframe-sandbox-container"),c.id=r,c.dataset.pid=n;try{var u;let N=(u=await this._pluginLocal._loadLayoutsData())===null||u===void 0?void 0:u.$$0;if(N){c.dataset.inited_layout="true";let{width:M,height:z,left:q,top:K,vw:fe,vh:Ae}=N;q=Math.max(q,0),q=typeof fe=="number"?`${Math.min(100*q/fe,99)}%`:`${q}px`,K=Math.max(K,45),K=typeof Ae=="number"?`${Math.min(100*K/Ae,99)}%`:`${K}px`,Object.assign(c.style,{width:M+"px",height:z+"px",left:q,top:K})}}catch(N){console.error("[Restore Layout Error]",N)}document.body.appendChild(c);let d=new Bn({id:n+"_iframe",container:c,url:i.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}),j,$=d.sendHandshake();return this._status="pending",new Promise((N,M)=>{j=setTimeout(()=>{M(new Error("handshake Timeout")),d.destroy()},4e3),$.then(z=>{this._parent=z,this._connected=!0,this.emit("connected"),z.on(Sn(e.id),({type:q,payload:K})=>{var fe,Ae;ct("[user -> *host] ",q,K),(fe=this._pluginLocal)===null||fe===void 0||fe.emit(q,K||{}),(Ae=this._pluginLocal)===null||Ae===void 0||Ae.caller.emit(q,K||{})}),this._call=async(...q)=>{await z.call(Sn(e.id),{type:q[0],payload:Object.assign(q[1]||{},{$$pid:e.id})})},this._callUserModel=async(q,...K)=>{if(q.startsWith(on))return await z.get(q.replace(on,""),...K);z.call(q,K?.[0])},N(null)}).catch(z=>{M(z)}).finally(()=>{clearTimeout(j)})}).catch(N=>{throw ct("[iframe sandbox] error",N),N}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){let e=this._pluginLocal,n=this._shadow=new Hr(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(r,i={},a)=>{var c;return a&&(i.actor=a),(c=this._pluginLocal)===null||c===void 0||c.emit(r,Object.assign(i,{$$pid:e.id})),a?.promise},this._callUserModel=async(...r)=>{var i;let a=r[0];(i=a)!==null&&i!==void 0&&i.startsWith(on)&&(a=a.replace(on,""));let c=r[1]||{},u=this._userModel[a];typeof u=="function"&&await u.call(null,c)}}catch(r){throw ct("[shadow sandbox] error",r),r}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame}_getSandboxShadowRoot(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let n=null;this._parent&&(n=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(n=this._getSandboxShadowContainer(),this._shadow.destroy()),(e=n)===null||e===void 0||e.parentNode.removeChild(n)}}function or(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ir{constructor(e,n){or(this,"ctx",void 0),or(this,"opts",void 0),this.ctx=e,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){var r;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n,(r=this.opts)===null||r===void 0?void 0:r.assets]})}getItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}removeItem(e){var n;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}hasItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}}class Wr{constructor(e){var n,r,i;i=void 0,(r="ctx")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){var r,i;let a=this.ensureHostScope();return e=(r=x(e))===null||r===void 0?void 0:r.toLowerCase(),(i=a.logseq.api["exper_"+e])===null||i===void 0?void 0:i.apply(a,n)}async loadScripts(...e){(e=e.map(n=>n!=null&&n.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){let r=this.ensureHostScope();return e==="katex"&&r.katex&&n(r.katex).catch(console.error),r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let sr=t=>`task_callback_${t}`;class Gr{constructor(e,n,r={}){Tt(this,"_client",void 0),Tt(this,"_requestId",void 0),Tt(this,"_requestOptions",void 0),Tt(this,"_promise",void 0),Tt(this,"_aborted",!1),this._client=e,this._requestId=n,this._requestOptions=r,this._promise=new Promise((u,d)=>{if(!this._requestId)return d(null);this._client.once(sr(this._requestId),j=>{j&&j instanceof Error?d(j):u(j)})});let{success:i,fail:a,final:c}=this._requestOptions;this._promise.then(u=>{i?.(u)}).catch(u=>{a?.(u)}).finally(()=>{c?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Wn extends tn.EventEmitter{constructor(e){super(),Tt(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{let r=n?.requestId;r&&this.emit(sr(r),n?.payload)})}static createRequestTask(e,n,r){return new Gr(e,n,r)}async _request(e){let n=this.ctx.baseInfo.id,{success:r,fail:i,final:a,...c}=e,u=this.ctx.Experiments.invokeExperMethod("request",n,c),d=Wn.createRequestTask(this.ctx.Request,u,e);return c.abortable?d:d.promise}get ctx(){return this._ctx}}let Jr=pn(Object.keys,Object);var Zr=Object.prototype.hasOwnProperty;let Kr=function(t){if(!Pt(t))return Jr(t);var e=[];for(var n in Object(t))Zr.call(t,n)&&n!="constructor"&&e.push(n);return e},Gn=function(t){return dt(t)?jt(t):Kr(t)},Vr=function(t,e){return t&&an(t,e,Gn)},Yr=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Xr=function(t){return this.__data__.has(t)};function jn(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Fe;++e<n;)this.add(t[e])}jn.prototype.add=jn.prototype.push=Yr,jn.prototype.has=Xr;let Qr=jn,eo=function(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},to=function(t,e){return t.has(e)},ar=function(t,e,n,r,i,a){var c=1&n,u=t.length,d=e.length;if(u!=d&&!(c&&d>u))return!1;var j=a.get(t),$=a.get(e);if(j&&$)return j==e&&$==t;var N=-1,M=!0,z=2&n?new Qr:void 0;for(a.set(t,e),a.set(e,t);++N<u;){var q=t[N],K=e[N];if(r)var fe=c?r(K,q,N,e,t,a):r(q,K,N,t,e,a);if(fe!==void 0){if(fe)continue;M=!1;break}if(z){if(!eo(e,function(Ae,Xe){if(!to(z,Xe)&&(q===Ae||i(q,Ae,n,r,a)))return z.push(Xe)})){M=!1;break}}else if(q!==K&&!i(q,K,n,r,a)){M=!1;break}}return a.delete(t),a.delete(e),M},no=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n},ro=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n};var cr=l?l.prototype:void 0,Jn=cr?cr.valueOf:void 0;let oo=function(t,e,n,r,i,a,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new nt(t),new nt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=no;case"[object Set]":var d=1&r;if(u||(u=ro),t.size!=e.size&&!d)return!1;var j=c.get(t);if(j)return j==e;r|=2,c.set(t,e);var $=ar(u(t),u(e),r,i,a,c);return c.delete(t),$;case"[object Symbol]":if(Jn)return Jn.call(t)==Jn.call(e)}return!1},io=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},so=function(t,e,n){var r=e(t);return Te(t)?r:io(r,n(t))},ao=function(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var c=t[n];e(c,n,t)&&(a[i++]=c)}return a},co=function(){return[]};var lo=Object.prototype.propertyIsEnumerable,lr=Object.getOwnPropertySymbols;let uo=lr?function(t){return t==null?[]:(t=Object(t),ao(lr(t),function(e){return lo.call(t,e)}))}:co,ur=function(t){return so(t,Gn,uo)};var fo=Object.prototype.hasOwnProperty;let po=function(t,e,n,r,i,a){var c=1&n,u=ur(t),d=u.length;if(d!=ur(e).length&&!c)return!1;for(var j=d;j--;){var $=u[j];if(!(c?$ in e:fo.call(e,$)))return!1}var N=a.get(t),M=a.get(e);if(N&&M)return N==e&&M==t;var z=!0;a.set(t,e),a.set(e,t);for(var q=c;++j<d;){var K=t[$=u[j]],fe=e[$];if(r)var Ae=c?r(fe,K,$,e,t,a):r(K,fe,$,t,e,a);if(!(Ae===void 0?K===fe||i(K,fe,n,r,a):Ae)){z=!1;break}q||(q=$=="constructor")}if(z&&!q){var Xe=t.constructor,_t=e.constructor;Xe==_t||!("constructor"in t)||!("constructor"in e)||typeof Xe=="function"&&Xe instanceof Xe&&typeof _t=="function"&&_t instanceof _t||(z=!1)}return a.delete(t),a.delete(e),z},Zn=Oe(s,"DataView"),Kn=Oe(s,"Promise"),Vn=Oe(s,"Set"),Yn=Oe(s,"WeakMap");var fr="[object Map]",pr="[object Promise]",dr="[object Set]",hr="[object WeakMap]",mr="[object DataView]",ho=G(Zn),mo=G(Ee),go=G(Kn),vo=G(Vn),yo=G(Yn),bt=le;(Zn&&bt(new Zn(new ArrayBuffer(1)))!=mr||Ee&&bt(new Ee)!=fr||Kn&&bt(Kn.resolve())!=pr||Vn&&bt(new Vn)!=dr||Yn&&bt(new Yn)!=hr)&&(bt=function(t){var e=le(t),n=e=="[object Object]"?t.constructor:void 0,r=n?G(n):"";if(r)switch(r){case ho:return mr;case mo:return fr;case go:return pr;case vo:return dr;case yo:return hr}return e});let gr=bt;var vr="[object Arguments]",yr="[object Array]",An="[object Object]",br=Object.prototype.hasOwnProperty;let bo=function(t,e,n,r,i,a){var c=Te(t),u=Te(e),d=c?yr:gr(t),j=u?yr:gr(e),$=(d=d==vr?An:d)==An,N=(j=j==vr?An:j)==An,M=d==j;if(M&&oe(t)){if(!oe(e))return!1;c=!0,$=!1}if(M&&!$)return a||(a=new Ze),c||Ve(t)?ar(t,e,n,r,i,a):oo(t,e,d,n,r,i,a);if(!(1&n)){var z=$&&br.call(t,"__wrapped__"),q=N&&br.call(e,"__wrapped__");if(z||q){var K=z?t.value():t,fe=q?e.value():e;return a||(a=new Ze),i(K,fe,n,r,a)}}return!!M&&(a||(a=new Ze),po(t,e,n,r,i,a))},_r=function t(e,n,r,i,a){return e===n||(e==null||n==null||!ge(e)&&!ge(n)?e!=e&&n!=n:bo(e,n,r,i,t,a))},_o=function(t,e,n,r){var i=n.length,a=i,c=!r;if(t==null)return!a;for(t=Object(t);i--;){var u=n[i];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var d=(u=n[i])[0],j=t[d],$=u[1];if(c&&u[2]){if(j===void 0&&!(d in t))return!1}else{var N=new Ze;if(r)var M=r(j,$,d,t,e,N);if(!(M===void 0?_r($,j,3,r,N):M))return!1}}return!0},wr=function(t){return t==t&&!Ie(t)},wo=function(t){for(var e=Gn(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,wr(i)]}return e},xr=function(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}},xo=function(t){var e=wo(t);return e.length==1&&e[0][2]?xr(e[0][0],e[0][1]):function(n){return n===t||_o(n,t,e)}},Xn=function(t){return typeof t=="symbol"||ge(t)&&le(t)=="[object Symbol]"};var Co=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oo=/^\w*$/;let Qn=function(t,e){if(Te(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!Xn(t))||Oo.test(t)||!Co.test(t)||e!=null&&t in Object(e)};function er(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var c=t.apply(this,r);return n.cache=a.set(i,c)||a,c};return n.cache=new(er.Cache||Fe),n}er.Cache=Fe;let So=er;var jo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ao=/\\(\\)?/g;let ko=function(t){var e=So(t,function(r){return n.size===500&&n.clear(),r}),n=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(jo,function(n,r,i,a){e.push(i?a.replace(Ao,"$1"):r||n)}),e}),Eo=function(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var Cr=l?l.prototype:void 0,Or=Cr?Cr.toString:void 0;let To=function t(e){if(typeof e=="string")return e;if(Te(e))return Eo(e,t)+"";if(Xn(e))return Or?Or.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n},Io=function(t){return t==null?"":To(t)},Sr=function(t,e){return Te(t)?t:Qn(t,e)?[t]:ko(Io(t))},kn=function(t){if(typeof t=="string"||Xn(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},jr=function(t,e){for(var n=0,r=(e=Sr(e,t)).length;t!=null&&n<r;)t=t[kn(e[n++])];return n&&n==r?t:void 0},Lo=function(t,e,n){var r=t==null?void 0:jr(t,e);return r===void 0?n:r},Fo=function(t,e){return t!=null&&e in Object(t)},No=function(t,e,n){for(var r=-1,i=(e=Sr(e,t)).length,a=!1;++r<i;){var c=kn(e[r]);if(!(a=t!=null&&n(t,c)))break;t=t[c]}return a||++r!=i?a:!!(i=t==null?0:t.length)&&Ut(i)&&St(c,i)&&(Te(t)||Ct(t))},Mo=function(t,e){return t!=null&&No(t,e,Fo)},Po=function(t,e){return Qn(t)&&wr(e)?xr(kn(t),e):function(n){var r=Lo(n,t);return r===void 0&&r===e?Mo(n,t):_r(e,r,3)}},Ro=function(t){return function(e){return e?.[t]}},Do=function(t){return function(e){return jr(e,t)}},Uo=function(t){return Qn(t)?Ro(kn(t)):Do(t)},$o=function(t){return typeof t=="function"?t:t==null?kt:typeof t=="object"?Te(t)?Po(t[0],t[1]):xo(t):Uo(t)},zo=function(t,e){var n={};return e=$o(e,3),Vr(t,function(r,i,a){xt(n,e(r,i,a),r)}),n};function Ar(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Ho{constructor(e,n){Ar(this,"ctx",void 0),Ar(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=n,e._execCallableAPI("register-search-service",e.baseInfo.id,n.name,n.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:r=>(Te(r?.blocks)&&(r.blocks=r.blocks.map(i=>i&&zo(i,(a,c)=>`block/${c}`))),r)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([r,i])=>{let a=(c=>`service:search:${c}:${n.name}`)(r);e.caller.on(a,async c=>{if(f(n?.[i.f])){let u=null;try{u=await n[i.f].apply(n,(i.args||[]).map(d=>{if(c){if(d===!0)return c;if(c.hasOwnProperty(d)){let j=c[d];return delete c[d],j}}})),i.transformOutput&&(u=i.transformOutput(u))}catch(d){console.error("[SearchService] ",d),u=d}finally{i.reply&&e.caller.call(`${a}:reply`,u)}}})})}}function Ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let qo=Symbol.for("proxy-continue"),Bo=De()("LSPlugin:user"),kr=new ee("",{console:!0});function It(t,e,n){var r;if(typeof n!="function")return!1;let{key:i,label:a,desc:c,palette:u,keybinding:d,extras:j}=e,$=`SimpleCommandHook${i}${++Ir}`;this.Editor["on"+$](n),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:i,label:a,type:t,desc:c,keybinding:d,extras:j},["editor/hook",$]],u]})}function Er(t){return!(typeof(e=t)!="string"||e.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(kr.error(`#${t} is not a valid UUID string.`),!1);var e}let En=null,Tr=new Map,Wo={async getInfo(t){return En||(En=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?En[t]:En},registerCommand:It,registerSearchService(t){if(Tr.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);Tr.set(t.name,new Ho(this,t))},registerCommandPalette(t,e){let{key:n,label:r,keybinding:i}=t;return It.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:i},e)},registerCommandShortcut(t,e){let{binding:n}=t,r="$shortcut$",i=r+x(n);return It.call(this,r,{key:i,palette:!1,keybinding:t},e)},registerUIItem(t,e){var n;let r=this.baseInfo.id;(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;let n=t+"_"+this.baseInfo.id,r=t;It.call(this,"page-menu-item",{key:n,label:r},e)},onBlockRendererSlotted(t,e){if(!Er(t))return;let n=this.baseInfo.id,r=`hook:editor:${x(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(n,r),()=>{this.caller.off(r,e),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(t,...e){var n;if(!(t=(n=t)===null||n===void 0?void 0:n.trim()))return;let[r,i]=t.split(".");if(!["models","commands"].includes(i?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");let a=t.replace(`${r}.${i}.`,"");if(!r||!i||!a)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,i.toLowerCase(),a,e)},setFullScreen(t){let e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}},Ir=0,Go={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var n;Bo("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(r=>{let[i,...a]=r;if(i==="editor/hook"){let c=a[0],u=()=>{var j;(j=this.caller)===null||j===void 0||j.callUserModel(c)};typeof c=="function"&&(u=c);let d=`SlashCommandHook${i}${++Ir}`;r[1]=d,this.Editor["on"+d](u)}return r}),(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;let n=t+"_"+this.baseInfo.id;It.call(this,"block-context-menu-item",{key:n,label:t},e)},registerHighlightContextMenuItem(t,e,n){if(typeof e!="function")return!1;let r=t+"_"+this.baseInfo.id;It.call(this,"highlight-context-menu-item",{key:r,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){let r="block-content-"+e;n!=null&&n.replaceState?this.App.replaceState("page",{name:t},{anchor:r}):this.App.pushState("page",{name:t},{anchor:r})}},Jo={onBlockChanged(t,e){if(!Er(t))return;let n=this.baseInfo.id,r=`hook:db:${x(`block:${t}`)}`,i=({block:a,txData:c,txMeta:u})=>{a.uuid===t&&e(a,c,u)};return this.caller.on(r,i),this.App._installPluginHook(n,r),()=>{this.caller.off(r,i),this.App._uninstallPluginHook(n,r)}},datascriptQuery(t,...e){return e.pop(),e!=null&&e.some(n=>typeof n=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},Zo={},Ko={},Vo={makeSandboxStorage(){return new ir(this,{assets:!0})}};class tr extends vt(){constructor(e,n){super(),Ue(this,"_baseInfo",void 0),Ue(this,"_caller",void 0),Ue(this,"_version","0.0.15"),Ue(this,"_debugTag",""),Ue(this,"_settingsSchema",void 0),Ue(this,"_connected",!1),Ue(this,"_ui",new Map),Ue(this,"_mFileStorage",void 0),Ue(this,"_mRequest",void 0),Ue(this,"_mExperiments",void 0),Ue(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",r=>{r!=null&&r.toggle&&this.toggleMainUI()}),n.on("settings:changed",r=>{let i=Object.assign({},this.settings),a=Object.assign(this._baseInfo.settings,r);this.emit("settings:changed",{...a},i)}),n.on("beforeunload",async r=>{let{actor:i,...a}=r,c=this._beforeunloadCallback;try{c&&await c(a),i?.resolve(null)}catch(u){console.debug(`${n.debugTag} [beforeunload] `,u),i?.reject(u)}})}async ready(e,n){if(!this._connected)try{var r;typeof e=="function"&&(n=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=_(this._baseInfo,i),(r=i)!==null&&r!==void 0&&r.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(i.settings=function(a,c){let u=(c||[]).reduce((d,j)=>("default"in j&&(d[j.key]=j.default),d),{});return Object.assign(u,a)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(a){console.warn(a)}n&&n.call(this,i)}catch(i){console.error(`${this._debugTag} [Ready Error]`,i)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){let n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){let n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){let n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){let n=this._ui.get(0);n&&n.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){let e=this._ui.get(0);return!!(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(e=this)&&(((n=e.baseInfo)===null||n===void 0?void 0:n.effect)||!((r=e.baseInfo)!==null&&r!==void 0&&r.iir));var e,n,r}get logger(){return kr}get settings(){var e;return(e=this.baseInfo)===null||e===void 0?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),ce(this._baseInfo.lsr,e)}_makeUserProxy(e,n){let r=this,i=this.caller;return new Proxy(e,{get(a,c,u){let d=a[c];return function(...j){if(d){let N=d.apply(r,j.concat(n));if(N!==qo)return N}if(n){let N=c.toString().match(/^(once|off|on)/i);if(N!=null){let M=N[0].toLowerCase(),z=N.input.slice(M.length),q=M==="off",K=r.baseInfo.id,fe=`hook:${n}:${x(z)}`,Ae=j[0],Xe=j[1];i[M](fe,Ae);let _t=()=>{i.off(fe,Ae),i.listenerCount(fe)||r.App._uninstallPluginHook(K,fe)};return q?void _t():(r.App._installPluginHook(K,fe,Xe),_t)}}let $=c;return["git","ui","assets"].includes(n)&&($=n+"_"+$),i.callAsync("api:call",{tag:n,method:$,args:j})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(Wo,"app")}get Editor(){return this._makeUserProxy(Go,"editor")}get DB(){return this._makeUserProxy(Jo,"db")}get Git(){return this._makeUserProxy(Zo,"git")}get UI(){return this._makeUserProxy(Ko,"ui")}get Assets(){return this._makeUserProxy(Vo,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new ir(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new Wn(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new Wr(this)),e}}function Lr(t,e){return new tr(t,e)}if(window.__LSP__HOST__==null){let t=new Br(null);window.logseq=Lr({},t)}})(),Qe})())});var ai=oi(Nr());function ii(){logseq.useSettingsSchema([{title:"KaTeX Macros",description:"LaTeX macros [with KaTeX](https://katex.org/docs/options)",key:"macros",type:"object",default:{"\\differentialD":"\\mathrm{d}"}},{title:"Prefer Display Mode",description:"Render inline math in `\\displaystyle`",key:"preferDisplay",type:"boolean",default:!0}]),logseq.Experiments.registerExtensionsEnhancer("katex",async me=>{let ae=me.render;me.render=(te,Qe,R)=>(logseq.settings?.preferDisplay&&!R.displayMode&&(te="\\displaystyle "+te),R.macros={...R.macros,...logseq.settings?.macros},ae(te,Qe,R))})}logseq.ready(ii).catch(console.error);})();
/*! Bundled license information:

@logseq/libs/dist/lsplugin.user.js:
  (*! For license information please see lsplugin.user.js.LICENSE.txt *)
*/
